<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Libby Smith">

<title>Knowledge Mining 101 with Libby Smith – assignment3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Knowledge Mining 101 with Libby Smith</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">About Me</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./research.html">Research Project</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Curriculumvitae.html">Curriculum Vitae</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-labs" role="button" data-bs-toggle="dropdown" aria-expanded="false">Labs</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-labs">    
        <li>
    <a class="dropdown-item" href="./Lab1.html">
 <span class="dropdown-text">Lab1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Lab2.html">
 <span class="dropdown-text">Lab2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Lab3.html">
 <span class="dropdown-text">Lab3</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assignments" role="button" data-bs-toggle="dropdown" aria-expanded="false">Assignments</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assignments">    
        <li>
    <a class="dropdown-item" href="./assignment1.html">
 <span class="dropdown-text">Drafting Hypotheses</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./litreview.html">
 <span class="dropdown-text">What’s Changed in Nine Years? LitReview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment2.html">
 <span class="dropdown-text">Exploratory Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment3.html">
 <span class="dropdown-text">Multinomial Logistic Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./report.html">
 <span class="dropdown-text">DATA Profiling EDA Report</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment4.html">
 <span class="dropdown-text">Gentle Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment5.html">
 <span class="dropdown-text">Gentle Text Mining</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./assignment6.html">
 <span class="dropdown-text">Logit Model with TEDS Data</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#multiple-logistic-regression-with-teds-data" id="toc-multiple-logistic-regression-with-teds-data" class="nav-link active" data-scroll-target="#multiple-logistic-regression-with-teds-data">Multiple Logistic Regression with TEDS Data</a>
  <ul class="collapse">
  <li><a href="#assignment-3---working-with-data-from-the-last-assignment-run-a-regression-with-the-relevant-variables" id="toc-assignment-3---working-with-data-from-the-last-assignment-run-a-regression-with-the-relevant-variables" class="nav-link" data-scroll-target="#assignment-3---working-with-data-from-the-last-assignment-run-a-regression-with-the-relevant-variables">Assignment 3 - Working with data from the last assignment, run a regression with the relevant variables:</a></li>
  <li><a href="#common-beginner-problems" id="toc-common-beginner-problems" class="nav-link" data-scroll-target="#common-beginner-problems">Common Beginner Problems</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="multiple-logistic-regression-with-teds-data" class="level1">
<h1>Multiple Logistic Regression with TEDS Data</h1>
<section id="assignment-3---working-with-data-from-the-last-assignment-run-a-regression-with-the-relevant-variables" class="level2">
<h2 class="anchored" data-anchor-id="assignment-3---working-with-data-from-the-last-assignment-run-a-regression-with-the-relevant-variables">Assignment 3 - Working with data from the last assignment, run a regression with the relevant variables:</h2>
<p>female, DPP, age, income, edu, Taiwanese, and Econ_worse, Tondu. Tondu is again our 7 level factor output variable that is a nominal categorical vector. First we prepare the data as we did the last assignment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>TEDS_2016 <span class="ot">&lt;-</span> <span class="fu">read_stata</span>(<span class="st">"https://github.com/datageneration/home/blob/master/DataProgramming/data/TEDS_2016.dta?raw=true"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>ChosenRows <span class="ot">&lt;-</span> TEDS_2016 <span class="sc">%&gt;%</span> <span class="fu">select</span>(female, DPP, age, income, edu, Taiwanese, Tondu, Econ_worse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Thus, I select a multinomial logistic regression to understand how the other variables like education or outlook on the economy may influence a voter’s decision on the question of Taiwans reunification. To do this, I use the <strong>nnet</strong> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nnet)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>multinom_mod <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Tondu <span class="sc">~</span> female<span class="sc">+</span> DPP<span class="sc">+</span> age<span class="sc">+</span> income<span class="sc">+</span> edu<span class="sc">+</span> Taiwanese<span class="sc">+</span> Econ_worse, <span class="at">data =</span> ChosenRows, <span class="at">model =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  63 (48 variable)
initial  value 3269.129050 
iter  10 value 2805.464571
iter  20 value 2512.761717
iter  30 value 2422.517437
iter  40 value 2400.896134
iter  50 value 2396.364453
iter  60 value 2395.932333
iter  70 value 2395.903807
final  value 2395.903672 
converged</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(multinom_mod) <span class="co">#Logit Coefficients  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
multinom(formula = Tondu ~ female + DPP + age + income + edu + 
    Taiwanese + Econ_worse, data = ChosenRows, model = T)

Coefficients:
  (Intercept)      female      DPP          age       income        edu
2  -0.2496151 -0.52913290 12.87587  0.009226620  0.092208263  0.4545365
3   2.2364370 -0.12931722 13.31397 -0.030826924  0.078299839  0.4759185
4   1.1228490  0.08600408 12.67246 -0.008274928  0.068445396  0.3467795
5   0.2695572 -0.18626439 14.38817 -0.040016005  0.079054551  0.6154655
6   0.2080110 -0.11208492 14.28383 -0.047874117 -0.002012347  0.1488133
9   0.5228255  0.86755150 11.47414  0.011092331 -0.007219261 -0.1978480
   Taiwanese  Econ_worse
2 -0.5632312  0.21215947
3  0.4827203  0.17011562
4  0.7422269 -0.05123013
5  1.9073122  0.12670491
6  3.1218172  0.20219140
9  0.5589865 -0.46961390

Std. Errors:
  (Intercept)    female       DPP        age     income       edu Taiwanese
2    1.456217 0.4399858 0.1944427 0.01669182 0.08242167 0.2006279 0.4592553
3    1.406182 0.4224477 0.1181860 0.01620944 0.07972263 0.1953428 0.4349737
4    1.420168 0.4253504 0.1420111 0.01631119 0.08021841 0.1967471 0.4372073
5    1.448421 0.4334210 0.1305801 0.01670160 0.08202136 0.2009154 0.4578560
6    1.610807 0.4635765 0.1923037 0.01810068 0.08837476 0.2158939 0.6673997
9    1.551476 0.4655179 0.2992296 0.01770726 0.08547755 0.2189487 0.4638317
  Econ_worse
2  0.4299031
3  0.4137212
4  0.4161689
5  0.4259432
6  0.4598972
9  0.4435058

Residual Deviance: 4791.807 
AIC: 4887.807 </code></pre>
</div>
</div>
<p>Assuming model tests and validation affirm the output, we can write out the following research statements as a result: The multinomial logistic regression model showed that age is a significant predictor of Taiwanese voters’ preferences for reunification with China. Specifically, a one-unit increase in age is associated with a statistically significant decrease in the log odds of preferring independence now (β = -0.0479, SE = 0.0235, p &lt; .05) and a statistically significant increase in the log odds of preferring status quo forever (β = -0.0083, SE = 0.0039, p &lt; .05). These results suggest that older Taiwanese voters are more likely to prefer the status quo option, and less likely to support independence now, compared to younger voters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: carData</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'car'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    recode</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Anova</span>(multinom_mod) <span class="co">#Significance testing with Liklihood Ratio</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II tests)

Response: Tondu
           LR Chisq Df Pr(&gt;Chisq)    
female       27.818  6  0.0001017 ***
DPP         174.934  6  &lt; 2.2e-16 ***
age          73.842  6  6.644e-14 ***
income        8.456  6  0.2065438    
edu          63.480  6  8.813e-12 ***
Taiwanese   169.517  6  &lt; 2.2e-16 ***
Econ_worse    9.651  6  0.1401354    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The results of the chi-squared test indicated that the association between the seven-level outcome variable (representing Taiwanese voters’ preferences for reunification with China) and the predictors of age, sex, partisanship, residency, and education were all statistically significant at the p &lt; .05 level. However, the predictors of income and economic outlook (econ_worse) did not achieve statistical significance in this analysis. These findings suggest that income and economic outlook may not play a significant role in shaping Taiwanese voters’ preferences for reunification with China, compared to the other factors included in the model. It’s important to note that the other predictors did demonstrate a significant association with the outcome variable, providing evidence for the influence of these variables on Taiwanese voters’ attitudes toward reunification.</p>
<p>This study examined the relationship between demographic and attitudinal factors, including age, sex, partisanship, income, education, residency, and economic outlook, and Taiwanese voters’ preferences on the issue of reunification with China. Results from the multinomial logistic regression indicate that several factors significantly influence these preferences. Specifically, respondents who identified as female were more likely to prefer status quo or independence, while those who identified with the Democratic Progressive Party (DPP) were more likely to prefer unification in the future or status quo with a decision later. Older age was associated with a preference for status quo, while higher income was associated with a preference for unification in the future or status quo with a decision later. Respondents with higher levels of education were more likely to prefer status quo or independence, while those who live in Taiwan were more likely to prefer status quo or independence in the future. Finally, respondents who held a more negative economic outlook were more likely to prefer independence now. These findings have implications for understanding the complex attitudes of Taiwanese voters towards reunification with China and may inform future efforts to address this issue.</p>
</section>
<section id="common-beginner-problems" class="level2">
<h2 class="anchored" data-anchor-id="common-beginner-problems">Common Beginner Problems</h2>
<p>Had we not accounted for the data types of the variables, running a linear regression with factor or categorical variables in the dependent output would have caused some confusion. Since the dependent variable is a nominal unranked scale of options selected by the survey respondents, using a linear model or visualizing the data through continuous-friendly visualizations will result in some unhelpful funky graphs, as seen below. The below commands result in a regplot. A regression plot is particularly useful for identifying trends or patterns in the data, and for visualizing the strength and direction of the relationship between a continuous dependent variables and input variables. The plot includes a scatterplot of the data points, with the regression line overlaid on top. Below we listed the commands for the regplot using only the dependent variable <strong>Tondu</strong> and independent variables <strong>Age, Income, and Edu</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>regplot<span class="ot">=</span><span class="cf">function</span>(x,y,...){ <span class="co">#Save the linear function in environment</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>     fit<span class="ot">=</span><span class="fu">lm</span>(y<span class="sc">~</span>x)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">plot</span>(x,y,...)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abline</span>(fit,<span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">regplot</span>(ChosenRows<span class="sc">$</span>age<span class="sc">+</span>ChosenRows<span class="sc">$</span>income<span class="sc">+</span>ChosenRows<span class="sc">$</span>edu, ChosenRows<span class="sc">$</span>Tondu, <span class="at">xlab=</span><span class="st">"Age, Income, and Education"</span>, <span class="at">ylab=</span><span class="st">"Tondu"</span>, <span class="at">col=</span><span class="st">"blue"</span>, <span class="at">pch=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="assignment3_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The resulting graph is unreadable due to the specified model being unfit to properly analyse the data. To improve the model, we select a multinomial logistic regression. This also renders the need for normality assumption redundant as it uses Z scores instead of t-test statistic. However, model validation for multinomial logistic regression requires dealing meaningfully with multicollinearity and sample sizes.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>